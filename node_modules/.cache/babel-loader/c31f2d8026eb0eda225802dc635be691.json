{"ast":null,"code":"import _toConsumableArray from\"C:/Users/ADMIN/Desktop/NBTailee2201/Front-end project/03-Ecommerce-ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/ADMIN/Desktop/NBTailee2201/Front-end project/03-Ecommerce-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ADMIN/Desktop/NBTailee2201/Front-end project/03-Ecommerce-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ADMIN/Desktop/NBTailee2201/Front-end project/03-Ecommerce-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/Users/ADMIN/Desktop/NBTailee2201/Front-end project/03-Ecommerce-ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{productsData}from\"../data\";import Product from\"./Product\";import styled from\"styled-components\";import{mobile}from\"../responsive\";import{useEffect,useState}from\"react\";import{useLocation}from\"react-router\";import axios from\"axios\";import{userRequest}from\"../requestMethod\";import{jsx as _jsx}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-width: 100vw;\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: space-around;\\n  align-items: center;\\n  height: auto;\\n  max-height: 600vh;\\n  position: relative;\\n  \",\"\\n\"])),mobile({flexWrap:\"nowrap\",flexDirection:\"column\",marginBottom:\"50px\"}));function Products(_ref){var filters=_ref.filters,sort=_ref.sort;var location=useLocation();var cat=location.search.split(\"=\")[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),filterProduct=_useState2[0],setFilterProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),product=_useState4[0],setProduct=_useState4[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userRequest.get(cat?\"http://localhost:5000/api/products?category=\".concat(cat):\"http://localhost:5000/api/products\");case 3:data=_context.sent;setProduct(data.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[cat]);useEffect(function(){filters&&setFilterProduct(product.filter(function(item){return Object.entries(filters).every(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return item[key].includes(value);});}));},[product,cat,filters]);useEffect(function(){if(sort===\"Newest\"){setFilterProduct(function(prev){return _toConsumableArray(prev).sort(function(a,b){return a.createdAt-b.createdAt;});});}else if(sort===\"Oldest\"){setFilterProduct(function(prev){return _toConsumableArray(prev).sort(function(a,b){return b.createdAt-a.createdAt;});});}else{setFilterProduct(function(prev){return _toConsumableArray(prev).sort(function(a,b){return Number(a.price.split(\"$\")[0])-Number(b.price.split(\"$\")[0]);});});}},[sort]);return/*#__PURE__*/_jsx(Container,{children:cat?filterProduct.map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item.id);}):product.slice(0,8).map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item.id);})});}export default Products;","map":{"version":3,"names":["productsData","Product","styled","mobile","useEffect","useState","useLocation","axios","userRequest","Container","div","flexWrap","flexDirection","marginBottom","Products","filters","sort","location","cat","search","split","filterProduct","setFilterProduct","product","setProduct","get","data","console","log","filter","item","Object","entries","every","key","value","includes","prev","a","b","createdAt","Number","price","map","id","slice"],"sources":["C:/Users/ADMIN/Desktop/NBTailee2201/Front-end project/03-Ecommerce-ui/src/components/Products.js"],"sourcesContent":["import { productsData } from \"../data\";\r\nimport Product from \"./Product\";\r\nimport styled from \"styled-components\";\r\nimport { mobile } from \"../responsive\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport { userRequest } from \"../requestMethod\";\r\nconst Container = styled.div`\r\n  max-width: 100vw;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  height: auto;\r\n  max-height: 600vh;\r\n  position: relative;\r\n  ${mobile({\r\n    flexWrap: \"nowrap\",\r\n    flexDirection: \"column\",\r\n    marginBottom: \"50px\",\r\n  })}\r\n`;\r\n\r\nfunction Products({ filters, sort }) {\r\n  const location = useLocation();\r\n  const cat = location.search.split(\"=\")[1];\r\n  const [filterProduct, setFilterProduct] = useState([]);\r\n  const [product, setProduct] = useState([]);\r\n  useEffect(async () => {\r\n    try {\r\n      const data = await userRequest.get(\r\n        cat\r\n          ? `http://localhost:5000/api/products?category=${cat}`\r\n          : \"http://localhost:5000/api/products\"\r\n      );\r\n      setProduct(data.data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, [cat]);\r\n  useEffect(() => {\r\n    filters &&\r\n      setFilterProduct(\r\n        product.filter((item) =>\r\n          Object.entries(filters).every(([key, value]) =>\r\n            item[key].includes(value)\r\n          )\r\n        )\r\n      );\r\n  }, [product, cat, filters]);\r\n  useEffect(() => {\r\n    if (sort === \"Newest\") {\r\n      setFilterProduct((prev) =>\r\n        [...prev].sort((a, b) => a.createdAt - b.createdAt)\r\n      );\r\n    } else if (sort === \"Oldest\") {\r\n      setFilterProduct((prev) =>\r\n        [...prev].sort((a, b) => b.createdAt - a.createdAt)\r\n      );\r\n    } else {\r\n      setFilterProduct((prev) =>\r\n        [...prev].sort((a, b) => {\r\n          return Number(a.price.split(\"$\")[0]) - Number(b.price.split(\"$\")[0]);\r\n        })\r\n      );\r\n    }\r\n  }, [sort]);\r\n  return (\r\n    <Container>\r\n      {cat\r\n        ? filterProduct.map((item) => <Product key={item.id} item={item} />)\r\n        : product\r\n            .slice(0, 8)\r\n            .map((item) => <Product key={item.id} item={item} />)}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}